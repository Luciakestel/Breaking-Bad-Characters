"use strict";const charactersList=document.querySelector(".js_character_list"),favouriteList=document.querySelector(".js_favourite_list"),btn=document.querySelector(".js_btn"),input=document.querySelector(".js_input"),btnFav=document.querySelector(".js_fav_btn"),heartFav=document.querySelector(".js_heart_fav"),sectionFav=document.querySelector(".js_section_fav"),sectionCharacters=document.querySelector(".js_section_characters"),paintCharact=document.querySelector(".js_characters");let characters=[],favCharacters=[];function fetchCharacters(){fetch("./assets/data/characters.json").then(e=>e.json()).then(e=>{characters=e,renderFavSaved(),renderCharacters()})}function renderFavSaved(){const e=JSON.parse(localStorage.getItem("Favourite list"));null!==e&&(favCharacters=e,renderFavCharacters())}function renderCharacters(){let e="";for(const a of characters){let t="";t=-1===favCharacters.findIndex(e=>e.char_id===a.char_id)?"":"selected",e+=`<li >\n        <article class="js_list_element article ${t}" id='${a.char_id}'>\n            <h3 class="article_title">${a.name}</h3>\n            <img src="${a.img}" alt="Foto del personaje" class="article_img">\n            <p class="article_status">${a.status}</p>\n        </article>\n        </li>`}charactersList.innerHTML=e;const a=document.querySelectorAll(".js_list_element");for(const e of a)e.addEventListener("click",handleClickCharacter)}function handleClickCharacter(e){e.currentTarget.classList.toggle("selected");const a=characters.find(a=>a.char_id===parseInt(e.currentTarget.id)),t=favCharacters.findIndex(a=>a.char_id===parseInt(e.currentTarget.id));-1===t?favCharacters.push(a):favCharacters.splice(t,1),renderFavCharacters()}function searchCharacters(e){e.preventDefault();const a=input.value;fetch("https://breakingbadapi.com/api/characters?name="+a).then(e=>e.json()).then(e=>{characters=e,renderCharacters()})}function renderFavCharacters(){sectionFav.classList.remove("collapse");let e="";for(const a of favCharacters)e+=`<li>\n    <article class="article_fav selected" id='${a.char_id}'>\n        <div class="article_fav_box">  \n        <h3 class="article_fav_title">${a.name}</h3>\n        <div class="article_fav_close js_close" id='${a.char_id}'></div>\n        </div>\n        <img src="${a.img}" alt="Foto del personaje" class="article_fav_img"> \n        <p class="article_fav_status">${a.status}</p>\n    </article>\n    </li>`;favouriteList.innerHTML=e,localStorage.setItem("Favourite list",JSON.stringify(favCharacters));const a=document.querySelectorAll(".js_close");for(const e of a)e.addEventListener("click",closeFav)}function closeFav(e){e.preventDefault();const a=favCharacters.findIndex(a=>a.char_id===parseInt(e.currentTarget.id));-1!==a&&favCharacters.splice(a,1),renderCharacters(),renderFavCharacters(),0===favCharacters.length&&sectionFav.classList.add("collapse")}function resetFavs(e){e.preventDefault();favouriteList.innerHTML="",favCharacters=[],localStorage.removeItem("Favourite list"),renderCharacters(),sectionFav.classList.add("collapse")}function handleClickHeart(){sectionFav.classList.contains("collapse")?(sectionFav.classList.remove("collapse"),sectionCharacters.classList.add("collapse")):(sectionFav.classList.add("collapse"),sectionCharacters.classList.remove("collapse"))}function renderCharactersAgain(){fetchCharacters(),input.value=""}fetchCharacters(),btn.addEventListener("click",searchCharacters),btnFav.addEventListener("click",resetFavs),heartFav.addEventListener("click",handleClickHeart),paintCharact.addEventListener("click",renderCharactersAgain);